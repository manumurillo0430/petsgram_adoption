{"ast":null,"code":"var _jsxFileName = \"/Users/manumurillo/Downloads/petsgram_adoption/client/src/context/AuthContext.jsx\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\nimport { createContext, useContext, useEffect, useState, useReducer } from 'react';\nimport { DeleteReq, GetReq } from '../utils/api';\nimport { PutReq } from '../utils/api';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst AuthContext = /*#__PURE__*/createContext({\n  isLoading: true,\n  isActiveSession: false,\n  currentUser: {},\n  petsUserSaved: [],\n  petsUserAdopted: [],\n  petsUserFostered: [],\n  petsUserLiked: [],\n  verifyUser: () => {},\n  getCurrentUser: () => {},\n  userLikedPet: () => {},\n  userSavedPet: () => {},\n  userUnsavedPet: () => {},\n  getPetsUserLiked: () => {},\n  getPetsUserSaved: () => {}\n});\nfunction AuthProvider(_ref) {\n  _s();\n  let {\n    children\n  } = _ref;\n  const [currentUser, setCurrentUser] = useState({});\n  const [petsUserAdopted, setPetsUserAdopted] = useState([]);\n  const [petsUserFostered, setPetsUserFostered] = useState([]);\n  const [petsUserLiked, setPetsUserLiked] = useState([]);\n  const [petsUserSaved, setPetsUserSaved] = useState([]);\n  const [isLoading, setIsLoading] = useState(true);\n  const [isActiveSession, setIsActiveSession] = useState(false);\n  const [user_id, setUser_id] = useState(undefined);\n  useEffect(() => {\n    const awaitVerifyUser = async () => await verifyUser();\n    awaitVerifyUser(); // eslint-disable-next-line\n  }, []);\n  useEffect(() => {\n    const awaitGetCurrentUser = async () => {\n      try {\n        const res = await GetReq(`/user/${user_id}`);\n        if (res) {\n          setCurrentUser(res.user);\n          setPetsUserAdopted(res.pets.adopted);\n          setPetsUserFostered(res.pets.fostered);\n          setPetsUserSaved(res.pets.saved);\n          setPetsUserLiked(res.pets.liked);\n          setIsActiveSession(true);\n        }\n      } catch (error) {\n        console.log(error);\n      }\n      setIsLoading(false);\n    };\n    if (user_id) {\n      awaitGetCurrentUser(user_id);\n    }\n  }, [user_id]);\n  const verifyUser = async () => {\n    try {\n      const res = await GetReq('');\n      console.log(res);\n      if (res.ok) setUser_id(res.user_id);\n    } catch (error) {\n      if (error.response.status === 401) {\n        setIsActiveSession(false);\n      } else console.log(error);\n    }\n  };\n  const getCurrentUser = async user_id => {\n    try {\n      const res = await GetReq(`/user/${user_id}`);\n      if (res) {\n        setCurrentUser(res.user);\n        setPetsUserAdopted(res.pets.adopted);\n        setPetsUserFostered(res.pets.fostered);\n        setPetsUserSaved(res.pets.saved);\n        setPetsUserLiked(res.pets.liked);\n        setIsActiveSession(true);\n      }\n    } catch (error) {\n      console.log(error);\n    }\n  };\n  const userLikedPet = async (pet_id, user_id) => {\n    try {\n      const res = await PutReq(`/user/like/${user_id}`, {\n        pet_id\n      });\n      if (res) {\n        setPetsUserLiked(res.likesUpdated);\n        console.log(petsUserLiked);\n      }\n    } catch (error) {\n      console.log(error);\n    }\n  };\n  const getPetsUserLiked = async user_id => {\n    try {\n      const res = await GetReq(`/user/likes/${user_id}`);\n      if (res) {\n        setPetsUserLiked(res.likesUpdated);\n      }\n    } catch (error) {\n      console.log(error);\n    }\n  };\n  const userSavedPet = async (user_id, pet_id) => {\n    try {\n      const res = await PutReq(`/user/save/${user_id}`, {\n        pet_id\n      });\n      console.log(res);\n      if (res) {\n        setPetsUserSaved(res.savedPetsIdsListUpdated);\n      }\n    } catch (error) {\n      console.log(error);\n    }\n  };\n  const getPetsUserSaved = async user_id => {\n    try {\n      const res = await GetReq(`/user/save/${user_id}`);\n      console.log(res);\n      if (res) {\n        setPetsUserSaved(res.savedPets);\n      }\n    } catch (error) {}\n  };\n  const userUnsavedPet = async (user_id, pet_id) => {\n    try {\n      const res = await DeleteReq(`/user/unsave/${user_id}`, {\n        pet_id\n      });\n      console.log(res);\n      if (res) {\n        getCurrentUser(user_id);\n      }\n    } catch (error) {\n      console.log(error);\n    }\n  };\n  const clearCurrentUser = async () => {\n    setCurrentUser({});\n    setIsActiveSession(false);\n  };\n  return /*#__PURE__*/_jsxDEV(AuthContext.Provider, {\n    value: {\n      currentUser,\n      user_id,\n      isLoading,\n      isActiveSession,\n      petsUserAdopted,\n      petsUserFostered,\n      petsUserLiked,\n      petsUserSaved,\n      verifyUser,\n      clearCurrentUser,\n      getCurrentUser,\n      userLikedPet,\n      userSavedPet,\n      userUnsavedPet,\n      getPetsUserLiked,\n      getPetsUserSaved\n    },\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 147,\n    columnNumber: 9\n  }, this);\n}\n_s(AuthProvider, \"4C/HSVt9EcyUpowP2fgECUmiVy8=\");\n_c = AuthProvider;\nexport const useAuthContext = () => {\n  _s2();\n  return useContext(AuthContext);\n};\n_s2(useAuthContext, \"gDsCjeeItUuvgOWf1v4qoK9RF6k=\");\nexport default AuthProvider;\nvar _c;\n$RefreshReg$(_c, \"AuthProvider\");","map":{"version":3,"names":["createContext","useContext","useEffect","useState","useReducer","DeleteReq","GetReq","PutReq","jsxDEV","_jsxDEV","AuthContext","isLoading","isActiveSession","currentUser","petsUserSaved","petsUserAdopted","petsUserFostered","petsUserLiked","verifyUser","getCurrentUser","userLikedPet","userSavedPet","userUnsavedPet","getPetsUserLiked","getPetsUserSaved","AuthProvider","_ref","_s","children","setCurrentUser","setPetsUserAdopted","setPetsUserFostered","setPetsUserLiked","setPetsUserSaved","setIsLoading","setIsActiveSession","user_id","setUser_id","undefined","awaitVerifyUser","awaitGetCurrentUser","res","user","pets","adopted","fostered","saved","liked","error","console","log","ok","response","status","pet_id","likesUpdated","savedPetsIdsListUpdated","savedPets","clearCurrentUser","Provider","value","fileName","_jsxFileName","lineNumber","columnNumber","_c","useAuthContext","_s2","$RefreshReg$"],"sources":["/Users/manumurillo/Downloads/petsgram_adoption/client/src/context/AuthContext.jsx"],"sourcesContent":["import { createContext, useContext, useEffect, useState, useReducer } from 'react'\nimport { DeleteReq, GetReq } from '../utils/api'\nimport { PutReq } from '../utils/api'\n\nconst AuthContext = createContext({\n    isLoading: true,\n    isActiveSession: false,\n    currentUser: {},\n    petsUserSaved: [],\n    petsUserAdopted: [],\n    petsUserFostered: [],\n    petsUserLiked: [],\n    verifyUser: () => {},\n    getCurrentUser: () => {},\n    userLikedPet: () => {},\n    userSavedPet: () => {},\n    userUnsavedPet: () => {},\n    getPetsUserLiked: () => {},\n    getPetsUserSaved: () => {},\n})\n\nfunction AuthProvider({ children }) {\n    const [currentUser, setCurrentUser] = useState({})\n    const [petsUserAdopted, setPetsUserAdopted] = useState([])\n    const [petsUserFostered, setPetsUserFostered] = useState([])\n    const [petsUserLiked, setPetsUserLiked] = useState([])\n    const [petsUserSaved, setPetsUserSaved] = useState([])\n    const [isLoading, setIsLoading] = useState(true)\n    const [isActiveSession, setIsActiveSession] = useState(false)\n    const [user_id, setUser_id] = useState(undefined)\n\n    useEffect(() => {\n        const awaitVerifyUser = async () => await verifyUser()\n        awaitVerifyUser() // eslint-disable-next-line\n    }, [])\n\n    useEffect(() => {\n        const awaitGetCurrentUser = async () => {\n            try {\n                const res = await GetReq(`/user/${user_id}`)\n                if (res) {\n                    setCurrentUser(res.user)\n                    setPetsUserAdopted(res.pets.adopted)\n                    setPetsUserFostered(res.pets.fostered)\n                    setPetsUserSaved(res.pets.saved)\n                    setPetsUserLiked(res.pets.liked)\n                    setIsActiveSession(true)\n                }\n            } catch (error) {\n                console.log(error)\n            }\n            setIsLoading(false)\n        }\n        if (user_id) {\n            awaitGetCurrentUser(user_id)\n        }\n    }, [user_id])\n\n    const verifyUser = async () => {\n        try {\n            const res = await GetReq('')\n            console.log(res)\n            if (res.ok) setUser_id(res.user_id)\n        } catch (error) {\n            if (error.response.status === 401) {\n                setIsActiveSession(false)\n            } else console.log(error)\n        }\n    }\n    const getCurrentUser = async (user_id) => {\n        try {\n            const res = await GetReq(`/user/${user_id}`)\n            if (res) {\n                setCurrentUser(res.user)\n                setPetsUserAdopted(res.pets.adopted)\n                setPetsUserFostered(res.pets.fostered)\n                setPetsUserSaved(res.pets.saved)\n                setPetsUserLiked(res.pets.liked)\n                setIsActiveSession(true)\n            }\n        } catch (error) {\n            console.log(error)\n        }\n    }\n\n    const userLikedPet = async (pet_id, user_id) => {\n        try {\n            const res = await PutReq(`/user/like/${user_id}`, { pet_id })\n            if (res) {\n                setPetsUserLiked(res.likesUpdated)\n                console.log(petsUserLiked)\n            }\n        } catch (error) {\n            console.log(error)\n        }\n    }\n\n    const getPetsUserLiked = async (user_id) => {\n        try {\n            const res = await GetReq(`/user/likes/${user_id}`)\n            if (res) {\n                setPetsUserLiked(res.likesUpdated)\n            }\n        } catch (error) {\n            console.log(error)\n        }\n    }\n\n    const userSavedPet = async (user_id, pet_id) => {\n        try {\n            const res = await PutReq(`/user/save/${user_id}`, { pet_id })\n            console.log(res)\n            if (res) {\n                setPetsUserSaved(res.savedPetsIdsListUpdated)\n            }\n        } catch (error) {\n            console.log(error)\n        }\n    }\n    const getPetsUserSaved = async (user_id) => {\n        try {\n            const res = await GetReq(`/user/save/${user_id}`)\n            console.log(res)\n            if (res) {\n                setPetsUserSaved(res.savedPets)\n            }\n        } catch (error) {}\n    }\n    const userUnsavedPet = async (user_id, pet_id) => {\n        try {\n            const res = await DeleteReq(`/user/unsave/${user_id}`, { pet_id })\n            console.log(res)\n            if (res) {\n                getCurrentUser(user_id)\n            }\n        } catch (error) {\n            console.log(error)\n        }\n    }\n\n    const clearCurrentUser = async () => {\n        setCurrentUser({})\n        setIsActiveSession(false)\n    }\n\n    return (\n        <AuthContext.Provider\n            value={{\n                currentUser,\n                user_id,\n                isLoading,\n                isActiveSession,\n                petsUserAdopted,\n                petsUserFostered,\n                petsUserLiked,\n                petsUserSaved,\n                verifyUser,\n                clearCurrentUser,\n                getCurrentUser,\n                userLikedPet,\n                userSavedPet,\n                userUnsavedPet,\n                getPetsUserLiked,\n                getPetsUserSaved,\n            }}\n        >\n            {children}\n        </AuthContext.Provider>\n    )\n}\n\nexport const useAuthContext = () => useContext(AuthContext)\n\nexport default AuthProvider\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}