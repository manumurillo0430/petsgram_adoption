{"ast":null,"code":"var _jsxFileName = \"/Users/manumurillo/Downloads/petsgram_adoption/client/src/components/profile/ChangePasswordForm.jsx\",\n  _s = $RefreshSig$();\nimport { React, useState } from 'react';\nimport { useAuthContext } from '../../context/AuthContext';\nimport FormPasswordField from '../form/FormPasswordField';\nimport { requiredField } from '../../utils/globals';\nimport * as yup from 'yup';\nimport { Formik } from 'formik';\nimport { Avatar, Divider } from 'antd';\nimport { Text, Box, Center, Spinner, useToast } from '@chakra-ui/react';\nimport FormSubmitButtom from '../form/FormSubmitButtom';\nimport { PutReq } from '../../utils/api';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function ChangePasswordForm() {\n  _s();\n  const [changingUserPassword, sethCangingUserPassword] = useState(false);\n  const [serverError, setServerError] = useState(false);\n  const {\n    currentUser,\n    userId\n  } = useAuthContext();\n  const toast = useToast({\n    title: 'Password updated.',\n    description: \"We've updated your password.\",\n    status: 'success',\n    duration: 6000,\n    isClosable: true,\n    position: 'top'\n  });\n  const updatePasswordSchema = yup.object().shape({\n    currentpassword: yup.string().required(requiredField),\n    password: yup.string().required(requiredField).min(8, 'Password must be at least 8 characters.'),\n    repeatpassword: yup.string().required(requiredField).oneOf([yup.ref('password')], 'Passwords must match.')\n  });\n  return /*#__PURE__*/_jsxDEV(Formik, {\n    initialValues: {\n      currentpassword: '',\n      password: '',\n      repeatpassword: ''\n    },\n    validationSchema: updatePasswordSchema,\n    validateOnChange: false,\n    onSubmit: async (values, _ref) => {\n      let {\n        resetForm\n      } = _ref;\n      sethCangingUserPassword(true);\n      try {\n        const res = await PutReq(`/user/password/${currentUser.user_id}`, values);\n        if (res) {\n          setServerError(false);\n          sethCangingUserPassword(false);\n          toast();\n          resetForm();\n        }\n      } catch (error) {\n        console.log(error);\n        setServerError(error.response.data);\n        sethCangingUserPassword(false);\n      }\n    },\n    children: _ref2 => {\n      let {\n        handleSubmit\n      } = _ref2;\n      return /*#__PURE__*/_jsxDEV(\"form\", {\n        onSubmit: handleSubmit,\n        children: [/*#__PURE__*/_jsxDEV(Divider, {\n          style: {\n            border: 'none'\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 62,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Center, {\n          alignContent: \"end\",\n          flexDirection: \"column\",\n          justifyContent: \"center\",\n          children: [/*#__PURE__*/_jsxDEV(Avatar, {\n            size: 80,\n            src: currentUser === null || currentUser === void 0 ? void 0 : currentUser.picture\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 64,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(Text, {\n            mt: 3,\n            fontWeight: \"bold\",\n            children: [' ', currentUser.firstname, \" \", currentUser.lastname]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 65,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 63,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Divider, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 70,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Center, {\n          children: /*#__PURE__*/_jsxDEV(Box, {\n            w: \"50%\",\n            display: \"flex\",\n            justifyContent: \"center\",\n            flexDirection: \"column\",\n            children: [/*#__PURE__*/_jsxDEV(FormPasswordField, {\n              fieldLabel: \"Current Password\",\n              fieldName: \"currentpassword\",\n              req: true\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 73,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(FormPasswordField, {\n              fieldLabel: \"New Password\",\n              fieldName: \"password\",\n              req: true\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 74,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(FormPasswordField, {\n              fieldLabel: \"Confirm New Password\",\n              fieldName: \"repeatpassword\",\n              req: true\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 75,\n              columnNumber: 29\n            }, this), serverError ? /*#__PURE__*/_jsxDEV(Text, {\n              color: \"red\",\n              fontWeight: \"500\",\n              mt: 4,\n              textAlign: \"center\",\n              children: serverError\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 81,\n              columnNumber: 33\n            }, this) : null, /*#__PURE__*/_jsxDEV(FormSubmitButtom, {\n              buttonLabel: !changingUserPassword ? 'Save Changes' : /*#__PURE__*/_jsxDEV(Spinner, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 85,\n                columnNumber: 101\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 85,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 72,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 71,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 61,\n        columnNumber: 17\n      }, this);\n    }\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 35,\n    columnNumber: 9\n  }, this);\n}\n_s(ChangePasswordForm, \"BR8xFuJY4jUPdR6cYCPGWaytgyk=\", false, function () {\n  return [useAuthContext, useToast];\n});\n_c = ChangePasswordForm;\nvar _c;\n$RefreshReg$(_c, \"ChangePasswordForm\");","map":{"version":3,"names":["React","useState","useAuthContext","FormPasswordField","requiredField","yup","Formik","Avatar","Divider","Text","Box","Center","Spinner","useToast","FormSubmitButtom","PutReq","jsxDEV","_jsxDEV","ChangePasswordForm","_s","changingUserPassword","sethCangingUserPassword","serverError","setServerError","currentUser","userId","toast","title","description","status","duration","isClosable","position","updatePasswordSchema","object","shape","currentpassword","string","required","password","min","repeatpassword","oneOf","ref","initialValues","validationSchema","validateOnChange","onSubmit","values","_ref","resetForm","res","user_id","error","console","log","response","data","children","_ref2","handleSubmit","style","border","fileName","_jsxFileName","lineNumber","columnNumber","alignContent","flexDirection","justifyContent","size","src","picture","mt","fontWeight","firstname","lastname","w","display","fieldLabel","fieldName","req","color","textAlign","buttonLabel","_c","$RefreshReg$"],"sources":["/Users/manumurillo/Downloads/petsgram_adoption/client/src/components/profile/ChangePasswordForm.jsx"],"sourcesContent":["import { React, useState } from 'react'\nimport { useAuthContext } from '../../context/AuthContext'\nimport FormPasswordField from '../form/FormPasswordField'\nimport { requiredField } from '../../utils/globals'\nimport * as yup from 'yup'\nimport { Formik } from 'formik'\nimport { Avatar, Divider } from 'antd'\nimport { Text, Box, Center, Spinner, useToast } from '@chakra-ui/react'\nimport FormSubmitButtom from '../form/FormSubmitButtom'\nimport { PutReq } from '../../utils/api'\n\nexport default function ChangePasswordForm() {\n    const [changingUserPassword, sethCangingUserPassword] = useState(false)\n    const [serverError, setServerError] = useState(false)\n    const { currentUser, userId } = useAuthContext()\n    const toast = useToast({\n        title: 'Password updated.',\n        description: \"We've updated your password.\",\n        status: 'success',\n        duration: 6000,\n        isClosable: true,\n        position: 'top',\n    })\n\n    const updatePasswordSchema = yup.object().shape({\n        currentpassword: yup.string().required(requiredField),\n        password: yup.string().required(requiredField).min(8, 'Password must be at least 8 characters.'),\n        repeatpassword: yup\n            .string()\n            .required(requiredField)\n            .oneOf([yup.ref('password')], 'Passwords must match.'),\n    })\n\n    return (\n        <Formik\n            initialValues={{\n                currentpassword: '',\n                password: '',\n                repeatpassword: '',\n            }}\n            validationSchema={updatePasswordSchema}\n            validateOnChange={false}\n            onSubmit={async (values, { resetForm }) => {\n                sethCangingUserPassword(true)\n                try {\n                    const res = await PutReq(`/user/password/${currentUser.user_id}`, values)\n                    if (res) {\n                        setServerError(false)\n                        sethCangingUserPassword(false)\n                        toast()\n                        resetForm()\n                    }\n                } catch (error) {\n                    console.log(error)\n                    setServerError(error.response.data)\n                    sethCangingUserPassword(false)\n                }\n            }}\n        >\n            {({ handleSubmit }) => (\n                <form onSubmit={handleSubmit}>\n                    <Divider style={{ border: 'none' }} />\n                    <Center alignContent=\"end\" flexDirection=\"column\" justifyContent=\"center\">\n                        <Avatar size={80} src={currentUser?.picture} />\n                        <Text mt={3} fontWeight=\"bold\">\n                            {' '}\n                            {currentUser.firstname} {currentUser.lastname}\n                        </Text>\n                    </Center>\n                    <Divider />\n                    <Center>\n                        <Box w=\"50%\" display=\"flex\" justifyContent=\"center\" flexDirection=\"column\">\n                            <FormPasswordField fieldLabel=\"Current Password\" fieldName=\"currentpassword\" req={true} />\n                            <FormPasswordField fieldLabel=\"New Password\" fieldName=\"password\" req={true} />\n                            <FormPasswordField\n                                fieldLabel=\"Confirm New Password\"\n                                fieldName=\"repeatpassword\"\n                                req={true}\n                            />\n                            {serverError ? (\n                                <Text color=\"red\" fontWeight=\"500\" mt={4} textAlign=\"center\">\n                                    {serverError}\n                                </Text>\n                            ) : null}\n                            <FormSubmitButtom buttonLabel={!changingUserPassword ? 'Save Changes' : <Spinner />} />\n                        </Box>\n                    </Center>\n                </form>\n            )}\n        </Formik>\n    )\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}