{"ast":null,"code":"import _regeneratorRuntime from\"/Users/manumurillo/Downloads/petsgram_adoption/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/manumurillo/Downloads/petsgram_adoption/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/manumurillo/Downloads/petsgram_adoption/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect}from'react';import{Box,Tab,TabList,TabPanel,Tabs,TabPanels,Text}from'@chakra-ui/react';import GridViewPets from'../components/pet/GridViewPets';import SocialMediaViewPets from'../components/pet/SocialMediaViewPets';import{GetReq,PostReq}from'../utils/api';import{useSearchContext}from'../context/SearchContext';import{Divider}from'antd';import'../components/search/search.css';import SearchToggle from'../components/search/SearchToggle';import{useAuthContext}from'../context/AuthContext';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function MyPets(){var _useAuthContext=useAuthContext(),currentUser=_useAuthContext.currentUser,user_id=_useAuthContext.user_id,getCurrentUser=_useAuthContext.getCurrentUser,petsUserAdopted=_useAuthContext.petsUserAdopted,petsUserFostered=_useAuthContext.petsUserFostered,petsUserLiked=_useAuthContext.petsUserLiked,petsUserSaved=_useAuthContext.petsUserSaved;var _useSearchContext=useSearchContext(),getAllPets=_useSearchContext.getAllPets;var _useState=useState([]),_useState2=_slicedToArray(_useState,2),petsTabArray=_useState2[0],setPetsTabArray=_useState2[1];var _useState3=useState('fostered'),_useState4=_slicedToArray(_useState3,2),tab=_useState4[0],setTab=_useState4[1];useEffect(function(){function fetchPets(){return _fetchPets.apply(this,arguments);}function _fetchPets(){_fetchPets=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var allPets,filteredPets;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.next=2;return getAllPets();case 2:allPets=_context.sent;_context.next=5;return getCurrentUser(user_id);case 5:if(allPets&&petsUserFostered){filteredPets=allPets.filter(function(pet){return petsUserFostered.includes(pet.pet_id);});console.log(filteredPets);setPetsTabArray(filteredPets);}case 6:case\"end\":return _context.stop();}},_callee);}));return _fetchPets.apply(this,arguments);}fetchPets();},[]);var handleTabChange=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(tabSelected){var allPets,_allPets,_allPets2,_allPets3;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:_context2.prev=0;setTab(tabSelected);if(!(tabSelected==='liked')){_context2.next=8;break;}_context2.next=5;return getAllPets();case 5:allPets=_context2.sent;setPetsTabArray(allPets===null||allPets===void 0?void 0:allPets.filter(function(pet){return petsUserLiked.includes(pet.pet_id);}));console.log(petsTabArray);case 8:if(!(tabSelected==='saved')){_context2.next=13;break;}_context2.next=11;return getAllPets();case 11:_allPets=_context2.sent;setPetsTabArray(_allPets===null||_allPets===void 0?void 0:_allPets.filter(function(pet){return petsUserSaved.includes(pet.pet_id);}));case 13:if(!(tabSelected==='fostered')){_context2.next=18;break;}_context2.next=16;return getAllPets();case 16:_allPets2=_context2.sent;setPetsTabArray(_allPets2===null||_allPets2===void 0?void 0:_allPets2.filter(function(pet){return petsUserFostered.includes(pet.pet_id);}));case 18:if(!(tabSelected==='adopted')){_context2.next=23;break;}_context2.next=21;return getAllPets();case 21:_allPets3=_context2.sent;setPetsTabArray(_allPets3===null||_allPets3===void 0?void 0:_allPets3.filter(function(pet){return petsUserAdopted.includes(pet.pet_id);}));case 23:_context2.next=28;break;case 25:_context2.prev=25;_context2.t0=_context2[\"catch\"](0);console.log(_context2.t0);case 28:case\"end\":return _context2.stop();}},_callee2,null,[[0,25]]);}));return function handleTabChange(_x){return _ref.apply(this,arguments);};}();return/*#__PURE__*/_jsx(Box,{children:/*#__PURE__*/_jsxs(Tabs,{isFitted:true,children:[/*#__PURE__*/_jsx(Divider,{style:{border:'none',margin:'0.3rem'}}),/*#__PURE__*/_jsxs(TabList,{children:[/*#__PURE__*/_jsx(Tab,{onClick:function onClick(){return handleTabChange('fostered');},fontWeight:\"semibold\",children:\"My Fostered Pets\"}),/*#__PURE__*/_jsx(Tab,{onClick:function onClick(){return handleTabChange('saved');},fontWeight:\"semibold\",children:\"Saved Pets\"}),/*#__PURE__*/_jsx(Tab,{onClick:function onClick(){return handleTabChange('liked');},fontWeight:\"semibold\",children:\"Liked Pets\"}),/*#__PURE__*/_jsx(Tab,{onClick:function onClick(){return handleTabChange('adopted');},fontWeight:\"semibold\",children:\"My Adopted Pets\"})]}),/*#__PURE__*/_jsxs(TabPanels,{children:[/*#__PURE__*/_jsx(TabPanel,{children:/*#__PURE__*/_jsx(GridViewPets,{cardSize:25,petsArray:petsTabArray,tab:tab})}),/*#__PURE__*/_jsx(TabPanel,{children:/*#__PURE__*/_jsx(GridViewPets,{cardSize:25,petsArray:petsTabArray,tab:tab})}),/*#__PURE__*/_jsx(TabPanel,{children:/*#__PURE__*/_jsx(GridViewPets,{cardSize:25,petsArray:petsTabArray,tab:tab})}),/*#__PURE__*/_jsx(TabPanel,{children:/*#__PURE__*/_jsx(GridViewPets,{cardSize:25,petsArray:petsTabArray,tab:tab})})]})]})});}","map":{"version":3,"names":["React","useState","useEffect","Box","Tab","TabList","TabPanel","Tabs","TabPanels","Text","GridViewPets","SocialMediaViewPets","GetReq","PostReq","useSearchContext","Divider","SearchToggle","useAuthContext","jsx","_jsx","jsxs","_jsxs","MyPets","_useAuthContext","currentUser","user_id","getCurrentUser","petsUserAdopted","petsUserFostered","petsUserLiked","petsUserSaved","_useSearchContext","getAllPets","_useState","_useState2","_slicedToArray","petsTabArray","setPetsTabArray","_useState3","_useState4","tab","setTab","fetchPets","_fetchPets","apply","arguments","_asyncToGenerator","_regeneratorRuntime","mark","_callee","allPets","filteredPets","wrap","_callee$","_context","prev","next","sent","filter","pet","includes","pet_id","console","log","stop","handleTabChange","_ref","_callee2","tabSelected","_allPets","_allPets2","_allPets3","_callee2$","_context2","t0","_x","children","isFitted","style","border","margin","onClick","fontWeight","cardSize","petsArray"],"sources":["/Users/manumurillo/Downloads/petsgram_adoption/client/src/pages/MyPets.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react'\nimport {\n  Box,\n  Tab,\n  TabList,\n  TabPanel,\n  Tabs,\n  TabPanels,\n  Text,\n} from '@chakra-ui/react'\nimport GridViewPets from '../components/pet/GridViewPets'\nimport SocialMediaViewPets from '../components/pet/SocialMediaViewPets'\nimport { GetReq, PostReq } from '../utils/api'\nimport { useSearchContext } from '../context/SearchContext'\nimport { Divider } from 'antd'\nimport '../components/search/search.css'\nimport SearchToggle from '../components/search/SearchToggle'\nimport { useAuthContext } from '../context/AuthContext'\n\nexport default function MyPets() {\n  const {\n    currentUser,\n    user_id,\n    getCurrentUser,\n    petsUserAdopted,\n    petsUserFostered,\n    petsUserLiked,\n    petsUserSaved,\n  } = useAuthContext()\n  const { getAllPets } = useSearchContext()\n  const [petsTabArray, setPetsTabArray] = useState([])\n  const [tab, setTab] = useState('fostered')\n\n  useEffect(() => {\n    async function fetchPets() {\n      const allPets = await getAllPets()\n      await getCurrentUser(user_id)\n      if (allPets && petsUserFostered) {\n        const filteredPets = allPets.filter((pet) =>\n          petsUserFostered.includes(pet.pet_id),\n        )\n        console.log(filteredPets)\n        setPetsTabArray(filteredPets)\n      }\n    }\n    fetchPets()\n  }, [])\n\n  const handleTabChange = async (tabSelected) => {\n    try {\n      setTab(tabSelected)\n      if (tabSelected === 'liked') {\n        const allPets = await getAllPets()\n        setPetsTabArray(\n          allPets?.filter((pet) => petsUserLiked.includes(pet.pet_id)),\n        )\n        console.log(petsTabArray)\n      }\n      if (tabSelected === 'saved') {\n        const allPets = await getAllPets()\n        setPetsTabArray(\n          allPets?.filter((pet) => petsUserSaved.includes(pet.pet_id)),\n        )\n      }\n      if (tabSelected === 'fostered') {\n        const allPets = await getAllPets()\n        setPetsTabArray(\n          allPets?.filter((pet) => petsUserFostered.includes(pet.pet_id)),\n        )\n      }\n      if (tabSelected === 'adopted') {\n        const allPets = await getAllPets()\n        setPetsTabArray(\n          allPets?.filter((pet) => petsUserAdopted.includes(pet.pet_id)),\n        )\n      }\n    } catch (error) {\n      console.log(error)\n    }\n  }\n\n  return (\n    <Box>\n      <Tabs isFitted>\n        <Divider style={{ border: 'none', margin: '0.3rem' }} />\n        <TabList>\n          <Tab\n            onClick={() => handleTabChange('fostered')}\n            fontWeight=\"semibold\"\n          >\n            My Fostered Pets\n          </Tab>\n          <Tab onClick={() => handleTabChange('saved')} fontWeight=\"semibold\">\n            Saved Pets\n          </Tab>\n          <Tab onClick={() => handleTabChange('liked')} fontWeight=\"semibold\">\n            Liked Pets\n          </Tab>\n          <Tab onClick={() => handleTabChange('adopted')} fontWeight=\"semibold\">\n            My Adopted Pets\n          </Tab>\n        </TabList>\n\n        <TabPanels>\n          <TabPanel>\n            <GridViewPets cardSize={25} petsArray={petsTabArray} tab={tab} />\n          </TabPanel>\n          <TabPanel>\n            <GridViewPets cardSize={25} petsArray={petsTabArray} tab={tab} />\n          </TabPanel>\n          <TabPanel>\n            <GridViewPets cardSize={25} petsArray={petsTabArray} tab={tab} />\n          </TabPanel>\n          <TabPanel>\n            <GridViewPets cardSize={25} petsArray={petsTabArray} tab={tab} />\n          </TabPanel>\n        </TabPanels>\n      </Tabs>\n    </Box>\n  )\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}